<!DOCTYPE html>
<html lang="en">
<head>
    <title>Church Sphere</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
    <meta itemprop="name" content="Landscape Sphere">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="screenshot.png">
    <meta name="description" content="" />

    <link rel="stylesheet" href="skeleton.css">
    <link rel="stylesheet" href="styles.css">

</head>
<body>
    <canvas id="glcanvas" class="intro" width="100vw" height="100vh"></canvas>
    <div class="intro">
        <div class="container">
            <div class="row">
                <img src="ext/title.png" alt="5+ Enchanted Portals to the Commons" class="img title">
                <div class="six columns centered">
                    <img src="ext/intro-text.png" alt="Info" class="img">
                </div>
            </div>          
          </div>
        
    </div>

    <div class="audio">
        <img src="ext/audio-text.png" alt="Audio">
        <img src="ext/play-btn.png" alt="Toggle Audio" class="btn">
    </div>

    <libs/>
    <script type="text/javascript" src="js/patch.js" async></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <corelibs/>
    
    <script>
        /**
         * Called when there was a cables error.
         * @param {string} errId - ID of the error, e.g. 'NO_WEBGL' or 'NO_WEBAUDIO'
         *                         when the browser does not support the used APIs
         * @param {string} errMsg - The error message
         */
        function showError(errId, errMsg) {
            alert('An error occured: ' + errId + ', ' + errMsg);
        }

        function patchInitialized() {
            // You can now access the patch object (CABLES.patch), register variable watchers and so on
        }

        function patchFinishedLoading() {
            // The patch is ready now, all assets have been loaded
            $(".audio").on('click', function() {
                var isPlaying = CABLES.patch.getVar("isPlaying");
                if (isPlaying.getValue() === 0) {
                    isPlaying.setValue(1);
                } else {
                    isPlaying.setValue(0);
                }
            })
        }

        document.addEventListener('CABLES.jsLoaded', function(event) {
            CABLES.patch = new CABLES.Patch({
                patch: CABLES.exportedPatch,
                prefixAssetPath: '',
                glCanvasId: 'glcanvas',
                glCanvasResizeToWindow: true,
                onError: showError,
                onPatchLoaded: patchInitialized,
                onFinishedLoading: patchFinishedLoading,
            });
        });
    </script>
</body>
</html>
